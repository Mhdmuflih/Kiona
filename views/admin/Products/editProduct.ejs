<!DOCTYPE html>
<html lang="en">

<!-- Mirrored from demo.bootstrapdash.com/purple-admin-free/pages/forms/basic_elements.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 28 Dec 2023 06:57:48 GMT -->

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Purple Admin</title>
    <!-- plugins:css -->
    <link rel="stylesheet" href="../../admin/vendors/mdi/css/materialdesignicons.min.css">
    <link rel="stylesheet" href="../../admin/vendors/css/vendor.bundle.base.css">
    <!-- endinject -->
    <!-- Plugin css for this page -->
    <!-- End plugin css for this page -->
    <!-- inject:css -->
    <!-- endinject -->
    <!-- Layout styles -->
    <link rel="stylesheet" href="../../admin/css/style.css">
    <!-- End layout styles -->
    <link rel="shortcut icon" href="../../admin/images/kiona-logo.png" />
</head>

<body>
    <div class="container-scroller">
        <!-- partial:../../partials/_navbar.html -->
        <nav class="navbar default-layout-navbar col-lg-12 col-12 p-0 fixed-top d-flex flex-row">
            <div class="text-center navbar-brand-wrapper d-flex align-items-center justify-content-center">
                <a class="navbar-brand brand-logo" href="/admin/home"><img class="h-50"
                        src="../../admin/images/kiona-logo.png" alt="logo" /></a>
            </div>
            <div class="navbar-menu-wrapper d-flex align-items-stretch">
                <button class="navbar-toggler navbar-toggler align-self-center" type="button" data-toggle="minimize">
                    <span class="mdi mdi-menu"></span>
                </button>
                <div class="search-field d-none d-md-block">
                    <form class="d-flex align-items-center h-100" action="#">
                        <div class="input-group">
                            <div class="input-group-prepend bg-transparent">
                                <i class="input-group-text border-0 mdi mdi-magnify"></i>
                            </div>
                            <input type="text" class="form-control bg-transparent border-0"
                                placeholder="Search projects">
                        </div>
                    </form>
                </div>
                <ul class="navbar-nav navbar-nav-right">


                    <li class="nav-item nav-logout d-none d-lg-block">
                        <a class="nav-link" href="/admin/logout">
                            <i class="mdi mdi-power"></i>
                        </a>
                    </li>

                </ul>
                <button class="navbar-toggler navbar-toggler-right d-lg-none align-self-center" type="button"
                    data-toggle="offcanvas">
                    <span class="mdi mdi-menu"></span>
                </button>
            </div>
        </nav>
        <!-- partial -->
        <div class="container-fluid page-body-wrapper">
            <!-- partial:../../partials/_sidebar.html -->
            <nav class="sidebar sidebar-offcanvas" id="sidebar">
                <ul class="nav">
                    <li class="nav-item nav-profile">

                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/admin/home">
                            <span class="menu-title">Dashboard</span>
                            <i class="mdi mdi-home menu-icon"></i>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/admin/users">
                            <span class="menu-title">Users</span>
                            <i class="mdi mdi-contacts menu-icon"></i>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/admin/product">
                            <span class="menu-title">Products</span>
                            <i class="mdi mdi-format-list-bulleted menu-icon"></i>
                            <i class="mdi mdi-format-list-bulleted mdi-shopping"></i>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/admin/category">
                            <span class="menu-title">Category</span>
                            <i class="mdi mdi-chart-bar menu-icon"></i>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="../tables/basic-table.html">
                            <span class="menu-title">Order</span>
                            <i class="mdi mdi-table-large menu-icon"></i>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-toggle="collapse" href="#general-pages" aria-expanded="false"
                            aria-controls="general-pages">
                            <span class="menu-title">Sales</span>
                            <i class="menu-arrow"></i>
                            <i class="mdi mdi-medical-bag menu-icon"></i>
                        </a>
                        <div class="collapse" id="general-pages">
                            <ul class="nav flex-column sub-menu">
                                <li class="nav-item"> <a class="nav-link" href="../samples/blank-page.html"> Blank Page
                                    </a></li>
                                <li class="nav-item"> <a class="nav-link" href="../samples/login.html"> Login </a></li>
                                <li class="nav-item"> <a class="nav-link" href="../samples/register.html"> Register </a>
                                </li>
                                <li class="nav-item"> <a class="nav-link" href="../samples/error-404.html"> 404 </a>
                                </li>
                                <li class="nav-item"> <a class="nav-link" href="../samples/error-500.html"> 500 </a>
                                </li>
                            </ul>
                        </div>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="pages/tables/basic-table.html">
                            <span class="menu-title">Offer</span>
                            <i class="mdi mdi-table-large menu-icon"></i>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="pages/tables/basic-table.html">
                            <span class="menu-title">Coupons</span>
                            <i class="mdi mdi-table-large menu-icon"></i>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="pages/tables/basic-table.html">
                            <span class="menu-title">Banners</span>
                            <i class="mdi mdi-table-large menu-icon"></i>
                        </a>
                    </li>
                    <li class="nav-item sidebar-actions">
                        <span class="nav-link">
                            <div class="border-bottom">
                                <h6 class="font-weight-normal mb-3">Projects</h6>
                            </div>
                            <button class="btn btn-block btn-lg btn-gradient-primary mt-4">+ Add a project</button>
                            <div class="mt-4">
                                <div class="border-bottom">
                                    <p class="text-secondary">Categories</p>
                                </div>
                                <ul class="gradient-bullet-list mt-4">
                                    <li>Free</li>
                                    <li>Pro</li>
                                </ul>
                            </div>
                        </span>
                    </li>
                </ul>
            </nav>
            <!-- partial -->
            <div class="main-panel">
                <div class="content-wrapper">
                    <div class="page-header">
                        <h3 class="page-title"> Edit Product </h3>
                        <nav aria-label="breadcrumb">
                            <ol class="breadcrumb">
                                <li class="breadcrumb-item"><a href="/admin/editProduct?id=<%= product._id %> ">Edit
                                        Product</a></li>
                                <li class="breadcrumb-item active" aria-current="page">Products</li>
                            </ol>
                        </nav>
                    </div>

                    <div class="row">


                        <div class="col-12 grid-margin stretch-card">
                            <div class="card">
                                <div class="card-body">
                                    <h4 class="card-title">Edit Product</h4>
                                    <p class="card-description"> </p>

                                    <form method="post" id="form" action="/admin/editProduct?id=<%= product._id %>"
                                        class="forms-sample" enctype="multipart/form-data"
                                        onsubmit="edit('<%= product._id%>')">

                                        <div class="form-group">
                                            <label>Product upload</label>
                                            <input type="file" value="<%= product.image %>" name="images"
                                                class="file-upload-default" multiple>
                                            <!-- The file input element allows users to select multiple files -->
                                            <div class="input-group col-xs-12">
                                                <input type="text" class="form-control file-upload-info" disabled
                                                    placeholder="Upload Image">
                                                <!-- This input field shows the selected file names (if any) -->
                                                <span class="input-group-append">
                                                    <button class="file-upload-browse btn btn-gradient-primary"
                                                        type="button">Upload</button>
                                                    <!-- This button triggers the file selection dialog when clicked -->
                                                </span>
                                            </div>
                                        </div>


                                        <div class="form-group">
                                            <label>Uploaded Images</label>
                                            <div class="image-container">

                                                <% product.image.forEach(function(image) { %>
                                                    <div class="image-item" style="position: relative; display: inline-block;">
                                                        <img src="/Photos/product/<%= image %>" alt="Product Image" class="img-fluid"
                                                            style="max-width: 200px; max-height: 200px; margin-right: 10px;">
                                                        <button type="button" class="close-button"
                                                            style="position: absolute; top: 5px; margin-right: 5px; right: 10px; background:red; border: none; outline: none; color: white;"
                                                            data-image="<%= image %>">
                                                            X
                                                        </button>
                                                    </div>
                                                <% }); %>
                                                
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label>Name</label>
                                            <input type="text" value="<%= product.name %>" name="name"
                                                class="form-control" id="exampleInputName1" placeholder="Name">
                                        </div>
                                        <div class="form-group">
                                            <label>Price</label>
                                            <input type="number" value="<%= product.price %>" name="price"
                                                class="form-control" id="exampleInputEmail3" placeholder="Price">
                                        </div>
                                        <div class="form-group">
                                            <label>Quantity</label>
                                            <input type="number" value="<%= product.quantity %>" name="quantity"
                                                class="form-control" id="exampleInputPassword4" placeholder="Quantity">
                                        </div>

                                        <div class="form-group">
                                            <label>Categories</label>
                                            <select class="form-control my-custom-dropdown" name="category">
                                                <% category.forEach(function(cat) { %>
                                                    <option value="<%= cat.name %>">
                                                        <!-- Change value to category name -->
                                                        <%= cat.name %>
                                                    </option>
                                                    <% }); %>
                                            </select>
                                        </div>



                                        <div class="form-group">
                                            <input type="hidden" name="product_id" value="<%= product._id %>">
                                        </div>

                                        <div class="form-group">
                                            <input type="hidden" name="category_id" value="<%= category._id %>">
                                        </div>


                                        <div class="form-group">
                                            <label>Description</label>
                                            <input class="form-control" name="description" id="description" rows="4"
                                                value="<%= product.description %>" required></input>
                                        </div>


                                        <button type="submit" class="btn btn-gradient-primary mr-2">Submit</button>
                                        <button class="btn btn-light">Cancel</button>



                                        </select>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <% if(typeof message !=='undefined' ){ %>
        <p>
            <%= message %>
        </p>
        <% } %>

            </div>
            <!-- content-wrapper ends -->
            <!-- partial:../../partials/_footer.html -->
            <footer class="footer">
                <div class="container-fluid clearfix">
                    <span class="text-muted d-block text-center text-sm-left d-sm-inline-block">kiona Â©
                        kiona.com 2020</span>
                    <span class="float-none float-sm-right d-block mt-1 mt-sm-0 text-center"> <a
                            href="https://www.bootstrapdash.com/bootstrap-admin-template/" target="_blank">kiona
                            admin</a> from kiona.com</span>
                </div>
            </footer>
            <!-- partial -->
            </div>
            <!-- main-panel ends -->
            </div>
            <!-- page-body-wrapper ends -->
            </div>
            <!-- container-scroller -->
            <!-- plugins:js -->
            <script src="../../admin/vendors/js/vendor.bundle.base.js"></script>
            <!-- endinject -->
            <!-- Plugin js for this page -->
            <!-- End plugin js for this page -->
            <!-- inject:js -->
            <script src="../../admin/js/off-canvas.js"></script>
            <script src="../../admin/js/hoverable-collapse.js"></script>
            <script src="../../admin/js/misc.js"></script>
            <!-- endinject -->
            <!-- Custom js for this page -->
            <script src="../../admin/js/file-upload.js"></script>
            <!-- End custom js for this page -->



            <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>

            <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
            <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>


            <script>
                document.addEventListener("DOMContentLoaded", function () {
                    var cancelClicked = false; // Flag to track cancel button click

                    var closeButtons = document.querySelectorAll('.close-button');
                    closeButtons.forEach(function (button) {
                        button.addEventListener('click', function () {
                            if (!cancelClicked) {
                                var imageItem = button.closest('.image-item');
                                imageItem.remove();
                            }
                        });
                    });

                    // Add event listener to cancel button
                    var cancelButton = document.querySelector('.btn-light');
                    cancelButton.addEventListener('click', function () {
                        cancelClicked = true; // Set flag to true when cancel button is clicked
                    });
                });

                document.getElementById("form").addEventListener("submit", async (e) => {
                    e.preventDefault();

                    const formElement = document.getElementById("form");
                    const formData = new FormData(formElement);

                    const productId = formData.get("product_id");

                    const confirmation = await Swal.fire({
                        title: 'Are you sure?',
                        text: 'You won\'t be able to revert this!',
                        icon: 'warning',
                        showCancelButton: true,
                        confirmButtonColor: '#3085d6',
                        cancelButtonColor: '#d33',
                        confirmButtonText: 'Yes, Update Product!'
                    });

                    if (!confirmation.isConfirmed) {
                        return;
                    }

                    try {
                        const response = await axios.post(`/admin/editProduct?id=${productId}`, formData);

                        if (response.data.success) {
                            await Swal.fire({
                                icon: 'success',
                                title: 'Update Product!',
                                text: response.data.message
                            }).then(() => {
                                window.location.href = `/admin/product`;
                            });
                        } else {
                            await Swal.fire({
                                icon: 'error',
                                title: 'Error',
                                text: response.data.message
                            });
                            window.location.href = `/admin/editProduct?id=${productId}`;
                        }
                    } catch (error) {
                        console.error("Error updating Address: ", error.message);
                        Swal.fire({
                            icon: 'error',
                            title: 'Error',
                            text: 'There was an error updating the Product'
                        });
                    }
                });
                
            </script>






</body>

<!-- Mirrored from demo.bootstrapdash.com/purple-admin-free/pages/forms/basic_elements.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 28 Dec 2023 06:57:48 GMT -->

</html>